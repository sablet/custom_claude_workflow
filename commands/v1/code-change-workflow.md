---
allowed-tools: ["Read", "Write", "Grep", "Glob", "Task", "Bash"]
description: "2フェーズのコード変更ワークフロー（分析→実装ガイド作成）"
---

# コード変更ワークフロー: $ARGUMENTS

## 概要
コード変更を2つのフェーズに分けて実行するワークフロー。
フェーズ間でユーザーレビューを挟み、確実な実装計画を策定。

## 実行前提条件
- 対象仕様書/要求書: @$ARGUMENTS

## ワークフローフェーズ

### 前段階: 要求明確化（必要に応じて）
**目的**: 曖昧な要求の明確化とIssue内での仕様確定

```bash
# 曖昧なIssueの場合
/user:v1:clarify-requirements-with-issue [Issue番号]

# Issue化前の事前分析（特殊用途）
/user:v1:clarify-requirements [要求文書パス]
```

### フェーズ1: 変更要求分析（Step 1-4）
**目的**: 変更要求の分析からリスク特定まで

```bash
/user:v1:analyze-change-request-with-issue [Issue番号]
```

**成果物**: 
- コードベース分析結果
- 関連ファイル・影響範囲
- 実装計画案
- リスク分析・エッジケース

**ユーザーレビューポイント**:
- リスク分析結果の受け入れ判断
- 実装アプローチの承認
- 影響範囲の妥当性確認

### フェーズ2: 実装ガイド作成（Step 6-7）
**目的**: 技術検証から完全な実装指示書作成まで

```bash
/user:v1:create-implementation-guide [分析結果パス]
```

**成果物**:
- 技術的実現可能性検証
- 10-15K トークンの詳細実装ガイド
- 実装チェックリスト

## 実行フロー

### 標準実行
```bash
# 1. 分析フェーズ実行
/user:v1:analyze-change-request $ARGUMENTS

# 2. 分析結果をレビュー（ユーザー）
# - Step 4のリスク分析確認
# - Step 3の実装アプローチ承認

# 3. 実装ガイド作成フェーズ実行
/user:v1:create-implementation-guide [分析結果のanalysis-summary.mdパス]
```

### ユーザーレビューが必要な判断ポイント
1. **技術的制約・リスクの受け入れ** (フェーズ1完了後)
2. **実装アプローチの最終承認** (フェーズ1完了後)  
3. **実装ガイドの技術的妥当性** (フェーズ2完了後)

## 品質保証

### フェーズ1完了条件
- [ ] 全関連ファイルの特定完了
- [ ] 主要リスクの洗い出し完了
- [ ] 実装アプローチの選定完了

### フェーズ2完了条件
- [ ] 技術的実現可能性の検証完了
- [ ] 完全な実装指示書の作成完了
- [ ] テスト戦略の策定完了（受け入れテスト中心、単体テスト最小限）

### 最終成果物品質基準
- [ ] **完全性**: 実装に必要な全情報の包含
- [ ] **実行可能性**: コピー&ペーストで実装可能
- [ ] **検証可能性**: 実装結果の検証方法明確化
- [ ] **保守性**: 既存コードパターンとの整合性

---

## 推奨実行コマンド

**完全ワークフロー開始:**
```bash
/user:v1:analyze-change-request $ARGUMENTS
```

**実装ガイド作成（分析完了後）:**
```bash
/user:v1:create-implementation-guide [analysis-summary.mdのパス]
```