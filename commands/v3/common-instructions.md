---
description: "v3プロジェクト企画フェーズの共通指示・ガイドライン"
---

# v3プロジェクト企画フェーズ共通指示

## 基本的な実行パターン

### 必須の初期手順
1. **前ステップの成果物確認**
   - 該当するステップのドキュメントを確認（`@docs/planning_v3/phase{i}-step{j}-xxx.md`）

2. **作業ディレクトリの準備**
   ```bash
   !mkdir -p docs/planning_v3/
   ```

#### 選択肢形式の質問（推奨）
ユーザーの入力負荷を軽減するため、可能な限り選択肢形式で質問を行う：

```
[phase{i}-step{j} の目的]のため、以下の項目について番号で選択してください：

## A. [項目1]
以下から該当するものを選んでください（複数選択可）：
1. [選択肢1の説明]
2. [選択肢2の説明]
3. [選択肢3の説明]
4. その他（具体的に記入：_______）

## B. [項目2]
以下から最も近いものを選んでください：
1. [選択肢1の説明]
2. [選択肢2の説明]
3. [選択肢3の説明]
4. その他（具体的に記入：_______）

回答例: A-1, B-2, C-3, D-1
```

#### 選択肢設計の原則
- **網羅性**: 一般的なケースを幅広くカバー
- **明確性**: 各選択肢の説明は具体的で分かりやすく
- **柔軟性**: 「その他」オプションで個別ケースに対応
- **簡潔性**: 選択肢は3-5個程度に抑制
- **段階性**: 必要に応じて選択に応じた詳細質問を実施

### 設計案提示フェーズ
収集した情報を基に、以下の形式で設計案を提示：

```
以下の[設計内容]で phase{i}-step{j} のドキュメントを作成します。内容をご確認ください：

## [セクション1]
[具体的な設計内容]

## [セクション2]
[具体的な設計内容]

この内容で問題ありませんか？修正や追加が必要な箇所があれば教えてください。
```

## Mermaid図表の活用

### 各ステップで使用する図表
- **phase1-step1**: なし（コアアイデアの言語化が中心）
- **phase1-step2**: なし（ユーザーストーリーが中心）  
- **phase1-step3**: シーケンス図、ユースケース図
- **phase2-step1**: ER図、テーブル定義
- **phase2-step2**: フローチャート、API相互作用図
- **phase3-step1**: テストフローチャート、検証項目関係図
- **phase3-step2**: アーキテクチャ図、クラス図、シーケンス図

### Mermaid記法の基本原則
- 文法的な正確性に配慮して、コメントは最小限に
- 可視化可能な形で記述
- 関係性と流れを明確に表現

## 成果物作成の原則

### ファイル出力パス構造
すべてのフェーズ・ステップで共通の出力パス構造を使用してください：

```
docs/planning_v3/
## Phase 1: 要件定義フェーズ
├── phase1-step1-idea-and-goals.md           # アイデアと目標の明確化
├── phase1-step2-user-requirements.md        # ユーザー要件定義
├── phase1-step3-user-interaction.md         # ユーザーインタラクション設計

## Phase 2: システム設計フェーズ
├── phase2-step1-data-structure.md           # データ構造定義
├── phase2-step2-system-dataflow.md          # システム全体データフロー設計
├── phase2-step3-api-design.md               # API設計（個別API）

## Phase 3: 実装準備フェーズ
├── phase3-step1-test-plan.md                # テスト計画策定
└── phase3-step2-implementation-design.md    # 実装設計
```

**重要**: 各フェーズ・ステップの成果物は必ず上記のパスに出力してください。個別のパス指定は行わず、この共通構造に従ってください。

### ドキュメント構成要素
1. **概要**: ステップの目的と成果
2. **詳細内容**: 設計・定義・計画の具体的内容
3. **図表**: Mermaid記法による可視化
4. **依存関係**: 前後ステップとの関連性
5. **次ステップへの影響**: 後続ステップで参照される要素

## 重要な対話ポイント

### 情報の曖昧性への対処
- 具体例やサンプルを提示して明確化
- 他のサービスや実例を引用して理解促進
- 段階的に詳細化するアプローチ

### ユーザーの理解レベルへの配慮
- 技術的制約や経験レベルに合わせた提案
- 実装可能性を優先した現実的な設計
- 過度に複雑な設計は避け、シンプルさを重視

### 品質保証の組み込み
- 各ステップで検証可能な評価基準、テスタビリティを考慮

## ステップ間の依存関係管理

### 順次依存の原則
- 各ステップは前ステップの成果物に依存
- 変更時は後続ステップへの影響を考慮
- 整合性確保のための相互参照

### 並行可能な要素
- phase2-step1（データ構造）とphase1-step3（インタラクション）は部分的に並行可能
- phase3-step1（テスト計画）は他ステップの情報を基に後から詳細化可能

## 品質基準

### 完了条件
- ユーザーからの承認取得
- 必要な図表の作成完了
- 次ステップに必要な情報の明確化
- 実装可能性の確認

### 継続的改善
- ユーザーフィードバックの即座反映
- 設計の合理性・実現可能性の継続確認
- 後続ステップでの使いやすさの考慮