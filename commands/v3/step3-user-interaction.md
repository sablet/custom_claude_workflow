---
allowed-tools: ["Read", "Write", "Edit", "Bash"]
description: "ユーザーとシステムのインタラクションをシーケンス図で設計"
---

# Step3: ユーザーインタラクションの設計

## 概要
ユーザーがシステムとどのように関わり、どのような情報交換が行われるかを**ユースケース別シーケンス図**を用いて視覚的に表現します。これにより、ユーザーとシステムの間のやり取り、およびインターフェースの振る舞いを明確にします。

## 実行手順

### 1. 前ステップの成果物を確認
@docs/step2-user-requirements.md

### 2. 現在の日時を取得
!date "+%Y%m%d-%H%M%S"

### 3. 不足情報の特定と質問
Step2のユーザーストーリーを確認し、インタラクション設計に必要な情報を質問してください：

**確認すべき項目:**
- 各ユーザーストーリーの具体的なワークフローは明確ですか？
- ユーザーがシステムとどうやり取りするか具体的にイメージできますか？
- 各機能での入力・出力データは何ですか？
- エラーや例外ケースはどのようなものがありますか？
- UI/UXのイメージや選好はありますか？

### 4. 対話的情報収集
各ユーザーストーリーについて、以下のように詳細を聞き取ってください：

```
ユーザーインタラクション設計のため、各ユーザーストーリーについて詳しく教えてください：

1. 「[ユーザーストーリー1]」の具体的な流れ
   - ユーザーはどんな手順で操作しますか？
   - 各ステップで何を入力し、何が表示されますか？
   - どんなエラーケースが考えられますか？

2. 「[ユーザーストーリー2]」の具体的な流れ
   - ...

3. UI/UXの希望
   - どんなインターフェースをイメージしていますか？
   - 参考にしたいサイトやアプリはありますか？
```

### 5. インタラクション設計案の提示と承認
収集した情報を基に、以下の形式で設計案を提示してください：

```
以下のユーザーインタラクション設計でStep3のドキュメントを作成します。内容をご確認ください：

## ユースケース図
[システムの主要機能とアクター]

## シーケンス図
### [ユーザーストーリー1]のフロー
[Mermaid記法でのシーケンス図]

### [ユーザーストーリー2]のフロー
[Mermaid記法でのシーケンス図]

## インターフェース仕様
[入力・出力データの詳細]

## エラーハンドリング
[例外ケースと対応方法]

この内容で問題ありませんか？修正や追加が必要な箇所があれば教えてください。
```

### 6. フィードバック反映とドキュメント作成
!mkdir -p docs

最終的に承認された内容で `docs/step3-user-interaction.md` を作成してください。

## 依存関係
- **依存元**: Step2（`docs/step2-user-requirements.md`）
- **依存先**: Step5（API設計）、Step6（テスト計画）

## 出力成果物
- `docs/step3-user-interaction.md`: ユーザーインタラクション設計書（シーケンス図含む）

## 重要な対話ポイント
- ユーザーが「圧通りにやればいい」と答えた場合は、具体的なシナリオを例示して詳細を引き出してください
- UIのイメージが曖昧な場合は、他のサービスを例に出して具体化してください
- エラーケースは「どんなことがうまくいかないか」を具体的に想像してもらってください
- シーケンス図は最初はシンプルに、必要に応じて詳細化するアプローチを取ってください