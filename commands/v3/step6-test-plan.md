---
allowed-tools: ["Read", "Write", "Edit", "Bash"]
description: "インターフェース部分の検証項目関係性フローチャートによるテスト計画策定"
---

# Step6: テスト計画の策定

## 概要
実装されたシステムがユーザー要件を満たしているか検証するための**インターフェース部分の検証項目関係性フローチャート**を作成します。これは主に**受け入れテスト**と**統合テスト**の粒度で、どのような条件で、どのような期待結果が得られるべきかを定義します。

## 実行手順

### 1. 前ステップの成果物を確認
@docs/step3-user-interaction.md
@docs/step5-api-design.md

### 2. 現在の日時を取得
!date "+%Y%m%d-%H%M%S"

### 3. 不足情報の特定と質問
前ステップの成果物を確認し、テスト計画策定に必要な情報を質問してください：

**確認すべき項目:**
- テストのスコープや優先度は明確ですか？
- テスト環境やツールの制約はありますか？
- 品質基準や受け入れ条件は明確ですか？
- テスト自動化の希望や制約はありますか？
- パフォーマンスやセキュリティテストの要件はありますか？

### 4. 対話的情報収集
以下のようにテスト計画に必要な情報を質問してください：

```
テスト計画策定のため、以下について詳しく教えてください：

1. テストのスコープ
   - どの機能を优先的にテストしたいですか？
   - どの程度のテストカバレッジを目指しますか？

2. テスト環境とリソース
   - 使用できるテストツールやフレームワークはありますか？
   - テスト実行の予算や時間制約はありますか？

3. 品質基準
   - どんな条件で「テスト合格」と判断しますか？
   - 致命的なバグと許容できるバグの分け方は？

4. テスト自動化
   - どのテストを自動化したいですか？
   - CI/CDパイプラインへの組み込みは必要ですか？

5. 特別なテスト要件
   - セキュリティテストの要件はありますか？
   - パフォーマンステストの目標値はありますか？
```

### 5. テスト計画案の提示と承認
収集した情報を基に、以下の形式でテスト計画案を提示してください：

```
以下のテスト計画でStep6のドキュメントを作成します。内容をご確認ください：

## テスト戦略
[テストのスコープ、優先度、品質基準]

## 受け入れテスト
### ユーザーストーリー別テストケース
[各ユーザーストーリーの検証項目]

## 統合テスト
### APIテスト
[APIエンドポイント別のテストケース]

### データフローテスト
[データの一貫性や整合性の検証]

## 非機能テスト
[パフォーマンス、セキュリティテスト]

## テスト自動化戦略
[自動化対象、ツール、CI/CD統合]

## 検証項目フローチャート
[Mermaid記法でのテストフロー]

この内容で問題ありませんか？修正や追加が必要な箇所があれば教えてください。
```

以下の要素を含めて計画してください：

**テスト戦略の定義:**
- **受け入れテスト**: ユーザーストーリーの受け入れ基準検証
- **統合テスト**: API とデータベース間の連携検証
- **インターフェーステスト**: UI/UX とバックエンドの結合検証
- **パフォーマンステスト**: 応答時間・スループット検証
- **セキュリティテスト**: 認証・認可・入力検証テスト

**各テストレベルの検証項目:**

#### 受け入れテスト
- ユーザーストーリーごとの受け入れ基準
- エンドツーエンドのユーザージャーニー
- ビジネス価値の実現確認

#### 統合テスト
- API エンドポイント別の機能検証
- データフローの正確性確認
- 外部システムとの連携テスト
- エラーハンドリングの妥当性確認

#### テスト実行フロー
各テストケースについて、以下のフローチャートを作成：
1. **前提条件**: テスト実行前の状態設定
2. **実行手順**: 具体的なテストステップ
3. **期待結果**: 予想される出力・状態
4. **判定基準**: 成功・失敗の判断基準

### 4. テストケース設計
以下の要素を含むテストケースを作成してください：

**正常系テスト:**
- 標準的な利用パターン
- 境界値での動作確認
- 一般的な業務フロー

**異常系テスト:**
- 不正入力の処理
- システムエラーの処理
- ネットワークエラーの処理
- 権限エラーの処理

**非機能テスト:**
- レスポンス時間
- 同時接続数
- データ整合性
- セキュリティ脆弱性

### 5. テスト自動化戦略
以下の観点で自動化戦略を定義：
- **自動化対象**: 回帰テスト、煙突テスト
- **テストツール**: 使用するフレームワーク・ツール
- **CI/CD統合**: 継続的テストの実行方法

### 6. Mermaid記法でのフローチャート作成
検証項目関係性フローチャートはMermaid記法で作成してください。

### 6. フィードバック反映とドキュメント作成
!mkdir -p docs

最終的に承認された内容で `docs/step6-test-plan.md` を作成してください。

## 依存関係
- **依存元**: Step3（ユーザーインタラクション）、Step5（API設計）
- **依存先**: Step7（実装設計での品質保証組み込み）

## 出力成果物
- `docs/step6-test-plan.md`: テスト計画書（検証項目関係性フローチャート含む）

## 重要な対話ポイント
- テストの範囲が曖昧な場合は、具体的なシナリオや例を挙げて明確化してください
- テスト文化や経験レベルに合わせて、現実的な計画を立ててください
- 品質基準は測定可能で具体的な数値や条件で定義してください
- テスト自動化のメリットとコストを考慮し、優先度をつけて計画してください